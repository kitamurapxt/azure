**********************
Windows PowerShell トランスクリプト開始
開始時刻: 20240322171628
ユーザー名: D-080222\kitamura
RunAs ユーザー: D-080222\kitamura
構成名: 
コンピューター: D-080222 (Microsoft Windows NT 10.0.22621.0)
ホスト アプリケーション: C:\windows\System32\WindowsPowerShell\v1.0\powershell.exe
プロセス ID: 15036
PSVersion: 5.1.22621.2506
PSEdition: Desktop
PSCompatibleVersions: 1.0, 2.0, 3.0, 4.0, 5.0, 5.1.22621.2506
BuildVersion: 10.0.22621.2506
CLRVersion: 4.0.30319.42000
WSManStackVersion: 3.0
PSRemotingProtocolVersion: 2.3
SerializationVersion: 1.1.0.1
**********************
トランスクリプトが開始されました。出力ファイル: .\log\2024-03-22_1716.log
|
| - - - - - - - - - - - - - -
|
 Subscription:
Azure サブスクリプション 1 (3b2af730-85f0-4344-98cb-e075b01533d5) - 4d15abd0-59be-437c-bc6a-7313c6019b56 - h21kitamura@dai3.tokyo
|
|
|
| - - - - - - - - - - - - - -
| Check for the existence of Az modules.
| - - - - - - - - - - - - - -
Az.Accounts
Az.Resources
Az.Network
Az.Compute
Az.Storage
Az.RecoveryServices
|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  VirtualNetwork
| - - - - - - - - - - - - - -
.\csv\nw_parameter.csv

vNet_name      vNet_resourceGroup location  ranges
---------      ------------------ --------  ------
sample-vnet192 sample-rg          japaneast 192.168.0.0/24;192.168.255.0/24
sample-vnet192 sample-rg          japaneast 192.168.0.0/24;192.168.255.0/24
sample-vnet172 sample-rg          japaneast 172.16.0.0/24
sample-vnet10  sample-rg          japaneast 10.0.0.0/24


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  NSG
| - - - - - - - - - - - - - -

NSG_names         subnetNames                   vNet_name
---------         -----------                   ---------
nsg01;nsg02       192-168-0-0;192-168-0-128     sample-vnet192
                  192-168-255-0                 sample-vnet192
nsg03             172-16-0-0                    sample-vnet172
nsg01;nsg02;nsg03 10-0-0-0;10-0-0-64;10-0-0-128 sample-vnet10


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  NsgRule
| - - - - - - - - - - - - - -
.\csv\nsg_parameter.csv

nsgName ruleName                access direction sourceAddresses                          destAddresses                          destPorts
------- --------                ------ --------- ---------------                          -------------                          ---------
nsg01   AllowALL.subnet-in      Allow  inbound   192.168.0.0/24;172.16.0.0/24;10.0.0.0/24 VirtualNetwork                         *
nsg01   AllowALL.ALB-in         Allow  inbound   AzureLoadBalancer                        *                                      *
nsg01   DenyALL-in              Deny   inbound   *                                        *                                      *
nsg01   AllowALL.subnet-out     Allow  outbound  192.168.0.0/24;172.16.0.0/24;10.0.0.0/24 VirtualNetwork                         *
nsg01   DenyALL-out             Deny   outbound  *                                        *                                      *
nsg02   Allow53.google-out      Allow  outbound  VirtualNetwork                           8.8.8.8                                53
nsg02   DenyALL.Internet-out    Deny   outbound  VirtualNetwork                           Internet                               *
nsg03   Allow80_443.internet-in Allow  inbound   Internet                                 10.0.0.0/26;10.0.0.64/26;10.0.0.128/26 80;443
nsg03   AllowALL.ALB-in         Allow  inbound   AzureLoadBalancer                        *                                      *
nsg03   DenyALL-in              Deny   inbound   *                                        *                                      *
nsg03   AllowALL.subnet-out     Allow  outbound  192.168.0.0/24;172.16.0.0/24;10.0.0.0/24 10.0.0.0/26;10.0.0.64/26;10.0.0.128/26 *
nsg03   DenyALL-out             Deny   outbound  *                                        *                                      *


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  RouteTable
| - - - - - - - - - - - - - -

RouteTable_names        subnetNames                   vNet_name
----------------        -----------                   ---------
route01;route02         192-168-0-0;192-168-0-128     sample-vnet192
route03                 192-168-255-0                 sample-vnet192
                        172-16-0-0                    sample-vnet172
route01;route02;route03 10-0-0-0;10-0-0-64;10-0-0-128 sample-vnet10


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  RouteConfig
| - - - - - - - - - - - - - -

routeTableName rtResourceGroup routeName   routeAddress  nexthopType           nexthopIp
-------------- --------------- ---------   ------------  -----------           ---------
route01        sample-rg       default     0.0.0.0/0     VirtualAppliance      192.168.0.132
route02        sample-rg       to-Internet 8.8.8.8/32    Internet
route03        sample-rg       to-Onpre    10.10.10.0/24 VirtualNetworkGateway
route03        sample-rg       to-Vnet     10.0.0.0/24   VnetLocal


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  Subnet
| - - - - - - - - - - - - - -

vNet_name      subnetNames                   subnetRanges                           NSG_names         RouteTable_names
---------      -----------                   ------------                           ---------         ----------------
sample-vnet192 192-168-0-0;192-168-0-128     192.168.0.0/25;192.168.0.128/25        nsg01;nsg02       route01;route02
sample-vnet192 192-168-255-0                 192.168.255.0/25                                         route03
sample-vnet172 172-16-0-0                    172.16.0.0/24                          nsg03
sample-vnet10  10-0-0-0;10-0-0-64;10-0-0-128 10.0.0.0/26;10.0.0.64/26;10.0.0.128/26 nsg01;nsg02;nsg03 route01;route02;route03


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  vNet Peering
| - - - - - - - - - - - - - -

vNet_name      vNet_resourceGroup Peer_vNets                   Peer_vNetRgs
---------      ------------------ ----------                   ------------
sample-vnet192 sample-rg
sample-vnet192 sample-rg          sample-vnet172;sample-vnet10 sample-rg;sample-rg
sample-vnet172 sample-rg          sample-vnet192               sample-rg
sample-vnet10  sample-rg          sample-vnet192               sample-rg


|
| Azure_Virtual_Network_Peering [ sample-vnet192 ]
|
| PEERVNET [  ] not found.
| - - - - -
| Azure_Virtual_Network_Peering [ sample-vnet192 ]
|
| PEERVNET [  ] not found.
| - - - - -
| function add_vNetPeering completed.
|
| Azure_Virtual_Network_Peering [ sample-vnet172 ]
|
| PEERVNET [  ] not found.
| - - - - -
| function add_vNetPeering completed.
|
| Azure_Virtual_Network_Peering [ sample-vnet10 ]
|
| PEERVNET [  ] not found.
| - - - - -
| function add_vNetPeering completed.
|
|
|
| - - - - - - - - - - - - - -
|  VM_NIC
| - - - - - - - - - - - - - -
.\csv\vm_network.csv

vm_name     ipAddress     vNet_name      subnetNames
-------     ---------     ---------      -----------
sample-vm01 172.16.0.11   sample-vnet172 172-16-0-0
sample-vm02 172.16.0.12   sample-vnet172 172-16-0-0
sample-vm03 10.0.0.13     sample-vnet10  10-0-0-0
sample-vm04 10.0.0.14     sample-vnet10  10-0-0-0
sample-vm05 192.168.0.135 sample-vnet192 192-168-0-128


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  AvailabilitySet
| - - - - - - - - - - - - - -
.\csv\availability_parameter.csv

AvailabilitySet vm_resourceGroup Location  UpdateDomain FaultDomain ProximityPlacementGroup
--------------- ---------------- --------  ------------ ----------- -----------------------
sample-as01     sample-rg        japaneast 5            2           sample-ppg01
sample-as02     sample-rg        japaneast 3            2


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  VM
| - - - - - - - - - - - - - -
.\csv\vm_parameter.csv

vm_name     vm_resourceGroup vm_size         vmOsDisk_size ImageName
-------     ---------------- -------         ------------- ---------
sample-vm01 sample-rg        Standard_F2s_v2 128
sample-vm02 sample-rg        Standard_F2s_v2 128
sample-vm03 sample-rg        Standard_B1s    64
sample-vm04 sample-rg        Standard_B1s    64
sample-vm05 sample-rg        Standard_B1s    64            win2019-image


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  StorageAccount
| - - - - - - - - - - - - - -
.\csv\storage_parameter.csv

storageName     storageResourceGroup bootdiag_vmNames        flowlog_nsgs
-----------     -------------------- ----------------        ------------
sample001vmboot sample-rg            sample-vm01;sample-vm02
sample001nsglog sample-rg                                    nsg01;nsg02;nsg03


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  RecoveryServicesVault
| - - - - - - - - - - - - - -
.\csv\backup_parameter.csv

vmName      vmRg      RecoveryServicesName RecoveryServicesRg
------      ----      -------------------- ------------------
sample-vm01 sample-rg rsc01                sample-rg
sample-vm02 sample-rg rsc02                sample-rg


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  BackupPolicy
| - - - - - - - - - - - - - -
.\csv\backup_parameter.csv

RecoveryServicesName policyName   scheduleRunFrequency Redundancy
-------------------- ----------   -------------------- ----------
rsc01                WeeklyPolicy Weekly               locallyredundant
rsc02                DailyPolicy  Daily                locallyredundant


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  EnableBackupProtection
| - - - - - - - - - - - - - -
.\csv\backup_parameter.csv

vmName      RecoveryServicesName policyName
------      -------------------- ----------
sample-vm01 rsc01                WeeklyPolicy
sample-vm02 rsc02                DailyPolicy


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  Tag
| - - - - - - - - - - - - - -
.\csv\tag_parameter.csv

ResourceName ResourceGroup TagName    TagValue
------------ ------------- -------    --------
sample-vm01  sample-rg     CostCenter 1
sample-vm02  sample-rg     CostCenter 2


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
| deploy_AzVm.ps1 Complete.
| - - - - - - - - - - - - - -
|
**********************
Windows PowerShell トランスクリプト終了
終了時刻: 20240322172331
**********************
